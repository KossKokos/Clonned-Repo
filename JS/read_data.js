const fs = require("fs");

//read shoes list file

function getShoesFile(shoesListFP) {
  return new Promise((resolve, reject) => {
    fs.readFile(shoesListFP, "utf-8", (err, data) => {
      if (err) {
        reject(`Error: ${err}`);
      } else {
        resolve(JSON.parse(data));
      }
    });
  });
}

//read user list file

function getUsersFile(userListFP) {
  return new Promise((resolve, reject) => {
    fs.readFile(userListFP, "utf-8", (err, data) => {
      if (err) {
        reject(`Error: ${err}`);
      } else {
        resolve(JSON.parse(data));
      }
    });
  });
}

//get user data by username

async function getUserData(reqUserObj){
  const {filePath} = reqUserObj;
  const userList = await getUsersFile(filePath);
  const {username} = reqUserObj;
  let userData ;
  userList.forEach(user => {
    if(username === user.username){
      userData = user;
    }
  });
  userData?console.log('The user was found'):console.log('User not found');
  return userData
}
//get user data by id

async function getUserById(id,filePath){
  const userList = await getUsersFile(filePath);
  let userData ;
  userList.forEach(user => {
    if(id === user.id){
      userData = user;
    }
  });
  userData?console.log('The user was found'):console.log('User not found');
  return userData
}

//Main function

const mainFun = {
    shoesList : getShoesFile,
    userData : getUserData,
    userDataById : getUserById

  }

// Exports ==>>

module.exports = mainFun;

// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████████░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░██▓▓▓▓▓▓██▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████▓▓▓▓▓▓██░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░▓▓██▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓▓▓██▓▓░░░░░░░░░░░░
// ░░░░░░░░░░░░████▓▓▓▓  ▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓  ▓▓▓▓████░░░░░░░░░░
// ░░░░░░░░░░░░████▓▓▓▓  ▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓  ▓▓▓▓████░░░░░░░░░░
// ░░░░░░░░░░▒▒██▓▓▓▓░░  ▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓  ░░▓▓▓▓██▒▒░░░░░░░░
// ░░░░░░░░░░████▓▓▒▒    ▓▓▓▓██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓    ▓▓▓▓████░░░░░░░░
// ░░░░░░░░░░██▓▓▓▓      ▓▓▓▓████░░░░░░░░░░░░░░░░░░░░░░░░░░░░████▓▓▓▓      ▓▓▓▓██░░░░░░░░
// ░░░░░░░░░░██▓▓▓▓      ▓▓▓▓▓▓██░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓      ▓▓▓▓██░░░░░░░░
// ░░░░░░░░░░██▓▓▓▓      ▓▓▓▓▓▓██░░░░░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓      ▓▓▓▓██░░░░░░░░
// ░░░░░░░░████▓▓▓▓      ▓▓▓▓▓▓████░░░░░░░░░░░░░░░░░░░░░░░░████▓▓▓▓▓▓      ▓▓▓▓████░░░░░░
// ░░░░░░░░██▓▓▓▓        ▓▓▓▓▓▓▓▓██░░░░░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓▓▓        ▓▓▓▓██░░░░░░
// ░░░░░░░░██▓▓▓▓            ▓▓▓▓▓▓██░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓            ▓▓▓▓██░░░░░░
// ░░░░░░░░██▓▓▓▓          ░░▓▓▓▓▓▓██░░░░░░░░░░░░░░░░░░░░██▓▓▓▓▓▓░░          ▓▓▓▓██░░░░░░
// ░░░░░░░░██▓▓▓▓        ░░  ▓▓▓▓▓▓██░░████████████████░░██▓▓▓▓██  ░░        ▓▓▓▓██░░░░░░
// ░░░░░░░░██▓▓        ░░  ░░░░▓▓▓▓▓▓▓▓▒▒▒▒▒▒░░░░▒▒▒▒▒▒██▓▓▓▓▓▓  ░░  ░░        ▓▓██░░░░░░
// ░░░░░░██████      ░░  ░░  ▒▒▓▓▓▓▓▓▒▒▒▒▒▒░░░░░░░░▒▒▒▒░░▓▓▓▓▓▓▒▒  ░░  ░░      ▓▓████░░░░
// ░░░░██████▓▓▒▒▒▒▒▒  ▒▒  ▒▒░░░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░▒▒▒▒  ▒▒  ▒▒▒▒▒▒▓▓██████░░
// ░░░░██░░▒▒▒▒▒▒▒▒▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒▒▒▒▒▒▒▒▒░░██░░
// ░░░░██░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░██░░
// ░░░░██░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░██░░
// ░░░░░░██░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░██░░░░
// ░░░░░░██░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░██░░░░
// ░░████░░▓▓░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒  ██░░████
// ░░██░░██░░░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒░░░░██░░██
// ░░██░░░░▒▒░░░░▒▒▒▒░░░░░░░░░░░░░░░░  ░░░░░░░░░░░░░░░░  ░░░░░░░░░░░░░░░░▒▒▒▒░░░░▓▓░░░░██
// ░░██░░░░░░░░▒▒░░▒▒▒▒░░░░██░░░░░░      ░░░░░░░░░░░░      ░░░░░░██░░░░▒▒▒▒░░▒▒░░░░░░░░██
// ░░░░██░░░░░░▒▒░░▒▒▒▒░░░░██░░░░░░░░  ░░░░░░░░░░░░░░░░  ░░░░░░░░██░░░░▒▒▒▒▒▒▒▒░░░░░░██░░
// ░░░░▒▒██░░░░░░▒▒▒▒▒▒░░░░██▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓██░░░░▒▒▒▒▒▒░░░░░░██▒▒░░
// ░░░░░░░░▓▓░░░░░░▒▒▒▒▒▒▒▒██████░░░░░░░░░░░░░░░░░░░░░░░░░░░░██████▒▒▒▒▒▒▒▒░░░░░░██░░░░░░
// ░░░░██████████░░░░▒▒░░▒▒░░████░░░░░░░░░░░░░░░░░░░░░░░░░░░░████░░▒▒░░▒▒░░░░██████████░░
// ░░░░██░░░░░░░░▓▓░░░░░░▒▒▒▒▒▒██▓▓░░░░░░░░░░░░░░░░░░░░░░░░▓▓██▒▒▒▒▒▒░░░░░░▓▓░░░░░░░░██░░
// ░░░░░░██░░░░░░░░░░░░░░▒▒▒▒▒▒░░██░░▒▒▒▒░░░░░░░░░░░░▒▒▒▒░░██░░▒▒▒▒▒▒░░░░░░░░░░░░░░██░░░░
// ░░░░░░░░██████░░░░░░░░▒▒▒▒▒▒░░▓▓▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒░░░░░░░░██████░░░░░░
// ░░░░░░░░░░░░████░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░████░░░░░░░░░░
// ░░░░░░░░░░░░██████████░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░██████████░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░▓▓▓▓░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░▓▓▓▓░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒░░▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░▒▒▒▒▒▒▒▒░░░░░░░░▒▒▒▒▒▒▒▒░░██░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░▒▒▒▒▒▒░░░░░░░░▒▒▒▒▒▒░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░▒▒▒▒░░░░░░░░▒▒▒▒░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░▒▒▒▒▒▒░░░░▒▒▒▒▒▒░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░▒▒▒▒▒▒▒▒▒▒▒▒░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░▓▓▓▓▓▓▒▒░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░▓▓▓▓▓▓▓▓░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
